{"version":3,"sources":["webpack:///./src/app/app.component.css","webpack:///./src/app/base-image/base-image.component.css","webpack:///./src/app/control-bar/control-bar.component.css","webpack:///./src/app/drawable-canvas/drawable-canvas.component.css","webpack:///./src/app/modification-layer/modification-layer.component.css","webpack:///./src/app/verification-layer/verification-layer.component.css","webpack:///./src/app/app.component.html","webpack:///./src/app/base-image/base-image.component.html","webpack:///./src/app/control-bar/control-bar.component.html","webpack:///./src/app/drawable-canvas/drawable-canvas.component.html","webpack:///./src/app/modification-layer/modification-layer.component.html","webpack:///./src/app/verification-layer/verification-layer.component.html","webpack:///./src/app/config.service.ts","webpack:///crypto (ignored)","webpack:///util (ignored)","webpack:///./src/app/control.service.ts","webpack:///fs (ignored)","webpack:///./src async","webpack:///./src/main.ts","webpack:///./src/app/app.component.ts","webpack:///./src/app/app.module.ts","webpack:///./src/app/base-image/base-image.component.ts","webpack:///./src/app/base-image/bound.ts","webpack:///./src/app/control-bar/control-bar.component.ts","webpack:///./src/app/drawable-canvas/drawable-canvas.component.ts","webpack:///./src/app/modification-layer/modification-layer.component.ts","webpack:///./src/app/utils/Utils.ts","webpack:///./src/app/verification-layer/verification-layer.component.ts","webpack:///./src/environments/environment.ts","webpack:///./src/polyfills.ts"],"names":[],"mappings":"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","file":"main.bundle.js","sourcesContent":["module.exports = \"\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/app.component.css\n// module id = 1137\n// module chunks = 0","module.exports = \"\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/base-image/base-image.component.css\n// module id = 1138\n// module chunks = 0","module.exports = \":host {\\n    display: block;\\n}\\n\\n.component {\\n    display: inline-block;\\n    margin-right: 5px;\\n}\\n\\n/deep/ #ground-switcher mdl-switch .mdl-switch__track {\\n    background-color: rgba(244, 54, 72, 0.5);\\n}\\n\\n/deep/ #ground-switcher mdl-switch .mdl-switch__thumb {\\n    background-color: rgba(244, 54, 72, 1);\\n}\\n\\n/deep/ #ground-switcher mdl-switch.is-checked .mdl-switch__track{\\n    background-color: rgba(114, 181, 63, 0.5);\\n}\\n\\n/deep/ #ground-switcher mdl-switch.is-checked .mdl-switch__thumb{\\n    background-color: rgba(114, 181, 63, 1);\\n}\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/control-bar/control-bar.component.css\n// module id = 1139\n// module chunks = 0","module.exports = \"canvas{\\n    cursor: default;\\n}\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/drawable-canvas/drawable-canvas.component.css\n// module id = 1140\n// module chunks = 0","module.exports = \".center{\\n    text-align: center;\\n    margin-top: 5px;\\n    margin-bottom: 5px;\\n}\\n.canvas-layer{\\n    position: relative;\\n}\\n.canvas-layer base-image{\\n    position: absolute;\\n}\\n.canvas-layer drawable-canvas{\\n    position: absolute;\\n    opacity: 0.5;\\n}\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/modification-layer/modification-layer.component.css\n// module id = 1141\n// module chunks = 0","module.exports = \".center{\\n    text-align: center;\\n    margin-top: 5px;\\n    margin-bottom: 5px;\\n}\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/verification-layer/verification-layer.component.css\n// module id = 1142\n// module chunks = 0","module.exports = \"<mdl-layout mdl-fixed-header>\\n    <mdl-layout-header>\\n        <mdl-layout-header-row>\\n            <mdl-layout-title>Amazon Turk Annotation Test</mdl-layout-title>\\n        </mdl-layout-header-row>\\n    </mdl-layout-header>\\n    <mdl-layout-content>\\n        <modification-layer *ngIf=\\\"isPage('modification')\\\"></modification-layer>\\n        <verification-layer *ngIf=\\\"isPage('verification')\\\"></verification-layer>\\n    </mdl-layout-content>\\n</mdl-layout>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/app.component.html\n// module id = 1143\n// module chunks = 0","module.exports = \"\\n<canvas #canvas [height]=\\\"height\\\" [width]=\\\"width\\\"></canvas>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/base-image/base-image.component.html\n// module id = 1144\n// module chunks = 0","module.exports = \"<button mdl-button mdl-button-type=\\\"raised\\\" mdl-ripple\\n    (click)=\\\"reset()\\\">\\n    RESET\\n</button>\\n\\n<span>\\n    brush size: {{brushSize}}\\n</span>\\n<div id=\\\"slider-bar\\\" class=\\\"component\\\">\\n    <mdl-slider min=\\\"2\\\" max=\\\"20\\\" [(ngModel)]=\\\"brushSize\\\"\\n        (ngModelChange)=\\\"setSize($event)\\\"></mdl-slider>\\n</div>\\n<svg height=\\\"30px\\\" width=\\\"30px\\\" class=\\\"component\\\">\\n    <circle cx=\\\"50%\\\" cy=\\\"50%\\\"\\n    [attr.r]=\\\"brushSize\\\" [attr.fill]=\\\"groundColor(groundChecked)\\\"></circle>\\n</svg>\\n<div id=\\\"ground-switcher\\\" class=\\\"component\\\">\\n    <mdl-switch [(ngModel)]=\\\"groundChecked\\\" mdl-ripple\\n        (ngModelChange)=\\\"setGround($event)\\\"></mdl-switch>\\n    <span>\\n        {{groundText(groundChecked)}}\\n    </span>\\n</div>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/control-bar/control-bar.component.html\n// module id = 1145\n// module chunks = 0","module.exports = \"<canvas #canvas [height]=\\\"height\\\" [width]=\\\"width\\\" (mouseup)=\\\"dragEnd($event)\\\" (mousedown)=\\\"dragStart($event)\\\" (mousemove)=\\\"dragMove($event)\\\"></canvas>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/drawable-canvas/drawable-canvas.component.html\n// module id = 1146\n// module chunks = 0","module.exports = \"\\n<div class=\\\"center\\\">\\n    <app-control-bar></app-control-bar>\\n</div>\\n<div class=\\\"canvas-layer center\\\" [style.width.px]=\\\"width\\\" [style.height.px]=\\\"height\\\">\\n    <base-image [height]=\\\"height\\\" [width]=\\\"width\\\"></base-image>\\n    <drawable-canvas [height]=\\\"height\\\" [width]=\\\"width\\\"></drawable-canvas>\\n</div>\\n<div class=\\\"center\\\">\\n<button mdl-button mdl-ripple (click)=\\\"submit($event)\\\">SUBMIT</button>\\n</div>\\n<p class=\\\"center introduction\\\">\\n    Please modify the annotation for the boundary outlined with green color. There is also a grey boundary with text label to help you.<br/>\\n    For <strong>background</strong> area the segmentation wrongly included, drag the mouse to paint the correspinding area to <span style=\\\"color: red\\\">red</span><br>\\n    For <strong>foreground</strong> area the segmentation wrongly excluded, click the switch to use green paint, and drag the mouse to paint the correspinding area <span style=\\\"color: green\\\">green</span><br>\\n    Click <strong>SUBMIT</strong> below the image to submit<br>\\n    Click <strong>RESET</strong> if you want to restart the annotation<br>\\n    You could also adjust the brush size with the slider to obtain coarser or finer stroke.\\n</p>\\n\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/modification-layer/modification-layer.component.html\n// module id = 1147\n// module chunks = 0","module.exports = \"\\n<div class=\\\"center\\\">\\n    <base-image [height]=\\\"height\\\" [width]=\\\"width\\\"></base-image>\\n</div>\\n<div class=\\\"center\\\">\\n    <button mdl-button mdl-ripple (click)=\\\"submit(true)\\\">YES</button>\\n    <button mdl-button mdl-ripple (click)=\\\"submit(false)\\\">NO</button>\\n</div>\\n\\n<p class=\\\"center introduction\\\">\\n    Please determine if the quality annotation for the boundary outlined with green color is acceptable. There is also a grey boundary with text label to help you.<br>\\n    Click <strong>YES</strong> if you think the boundary is acceptable<br>\\n    Click <strong>No</strong> if you think the boundary needs further annotation<br>\\n</p>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/verification-layer/verification-layer.component.html\n// module id = 1148\n// module chunks = 0","import { Injectable } from '@angular/core'\nimport { URLSearchParams, Http } from '@angular/http'\n/* import { S3, config } from \"aws-sdk\" */\nimport * as aws from 'aws-sdk';\nimport * as _ from 'lodash'\nimport {saveAs} from 'file-saver'\nimport { Observable } from 'rxjs'\nimport { imgdata2mask } from './utils/Utils'\n\n@Injectable()\nexport class ConfigService {\n  objectId: string;\n  videoId: string;\n  frameId: string;\n  destination: string;\n  assignmentId: string;\n  page: string;\n  height: number;\n  width: number;\n  bucket: aws.S3 = new aws.S3();\n  size: Observable<[number, number]>;\n\n  constructor(http: Http) {\n    let param = new URLSearchParams(window.location.search.slice(1));\n    let height, width;\n    [this.videoId, this.objectId, this.frameId] = <Array<string>>param.get('vid').split(',');\n    this.destination = 'https://workersandbox.mturk.com/mturk/externalSubmit';\n    this.page = param.get('page');\n    this.size = Observable.create((observer) => {\n      http.get(this.getBoundingSrc()).subscribe(res => {\n        const parser = new DOMParser();\n        const xml = parser.parseFromString(res.text(), 'text/xml');\n        const queryint = (query) => parseInt(xml.querySelector(query).textContent);\n        const height = queryint('size height');\n        const width = queryint('size width');\n        const scale = 600 / width;\n        observer.next([width * scale, height * scale]);\n        this.width = width*scale;\n        this.height = height*scale;\n      });\n    });\n    this.bucket.config.update({\n      credentials: new aws.Credentials(\n        'AKIAJVK7INOUTATLACQQ',\n        'bXfmxk7zzh5hZA+vRg/wk28e3vbs5w7eOukpL7wa'\n      ),\n      region: 'us-west-2'\n    });\n  }\n  getFrameSrc(): string {\n    return `${window.location.pathname}assets/${this.videoId}/${this.objectId}_${this.frameId}.png`;\n  }\n  getBoundingSrc(): string {\n    return `${window.location.pathname}assets/${this.videoId}/00${this.frameId}.xml`;\n  }\n  submitVerification(valid: boolean) {\n    this.submitForm({\n      'assignmentId': this.assignmentId,\n      'frameId': this.frameId,\n      'objectId': this.objectId,\n      'videoId': this.videoId,\n      'valid': valid.toString(),\n    }, this.destination);\n  }\n  submitModification(image: ImageData) {\n    const [red, green] = imgdata2mask(image);\n    const f_red = new File([red], 'red.mask', {type: 'text/binary'});\n    const f_green = new File([green], 'green.mask', {type: 'text/binary'});\n    const n_red = 'green';\n    const n_green = 'red';\n    const path = `experimentdata/${this.frameId}-${this.objectId}-${this.videoId}-${this.assignmentId}`;\n    Promise.all([\n      this.submitS3(f_red, n_red),\n      this.submitS3(f_green, n_green),\n    ]).then(_ =>\n      this.submitForm({\n        'assignmentId': this.assignmentId,\n        'frameId': this.frameId,\n        'objectId': this.objectId,\n        'videoId': this.videoId,\n        'height': this.height,\n        'width': this.width,\n        'redfilepath': `${path}/${n_red}.mask`,\n        'greenfilepath': `${path}/${n_green}.mask`,\n      }, this.destination));\n  }\n\n  private submitS3(file: File, name: string) {\n    /* return this.bucket.putObject({ */\n    /*   Key: `experimentdata/${this.frameId}-${this.objectId}-${this.videoId}-${this.assignmentId}/${name}.mask`, */\n    /*   ContentType: file.type, */\n    /*   Body: file, */\n    /*   Bucket: 'bucket-for-annotation-search' */\n    /* }).promise(); */\n    return new Promise((resolve, reject) => {\n      saveAs(file, name);\n      resolve(null);\n    });\n  }\n  private submitForm(pair: Object, destination: string) {\n    const text = JSON.stringify(pair);\n    console.log(pair);\n    const file = new File([text], 'form', {type: 'plain/text'});\n    saveAs(file, 'form');\n    /* let form = <HTMLFormElement>document.createElement('form'); */\n    /* _.each(pair, (value, key) => { */\n    /*   let input = <HTMLInputElement>document.createElement('input'); */\n    /*   input.type = \"text\"; */\n    /*   input.value = value; */\n    /*   input.name = key; */\n    /*   form.appendChild(input); */\n    /* }); */\n    /* let button = <HTMLInputElement>document.createElement('input'); */\n    /* button.type = 'submit'; */\n    /* form.action = this.destination; */\n    /* document.body.appendChild(form); */\n    /* form.submit(); */\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/config.service.ts","/* (ignored) */\n\n\n//////////////////\n// WEBPACK FOOTER\n// crypto (ignored)\n// module id = 1450\n// module chunks = 0","/* (ignored) */\n\n\n//////////////////\n// WEBPACK FOOTER\n// util (ignored)\n// module id = 1451\n// module chunks = 0","import { Injectable, Component } from '@angular/core';\n\n@Injectable()\nexport class ControlService {\n\n  controller: any;\n  reciever: any;\n  constructor() {}\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/control.service.ts","/* (ignored) */\n\n\n//////////////////\n// WEBPACK FOOTER\n// fs (ignored)\n// module id = 344\n// module chunks = 0","function webpackEmptyContext(req) {\n\tthrow new Error(\"Cannot find module '\" + req + \"'.\");\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = 570;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src async\n// module id = 570\n// module chunks = 0","import './polyfills.ts';\n\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\nimport { enableProdMode } from '@angular/core';\nimport { environment } from './environments/environment';\nimport { AppModule } from './app/app.module';\n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic().bootstrapModule(AppModule);\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.ts","import { Component } from '@angular/core';\nimport { ConfigService } from './config.service'\n\n@Component({\n  selector: 'app-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.css']\n})\nexport class AppComponent {\n  config: ConfigService\n  constructor(config: ConfigService){\n    this.config = config;\n  }\n\n  isPage(page: string): boolean{\n    return this.config.page == page;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/app.component.ts","import { BrowserModule } from '@angular/platform-browser';\nimport { NgModule } from '@angular/core';\nimport { FormsModule } from '@angular/forms';\nimport { HttpModule } from '@angular/http';\nimport { MdlModule } from 'angular2-mdl'\n\nimport { AppComponent } from './app.component';\nimport { ControlBarComponent } from './control-bar/control-bar.component';\nimport { DrawableCanvasComponent } from './drawable-canvas/drawable-canvas.component';\nimport { ModificationLayerComponent } from './modification-layer/modification-layer.component';\nimport { BaseImageComponent } from './base-image/base-image.component';\nimport { ConfigService } from './config.service';\nimport { VerificationLayerComponent } from './verification-layer/verification-layer.component'\n\n/* const appRoutes: Routes = [ */\n/*   {path: 'verification', component: VerificationLayerComponent}, */\n/*   {path: 'modification', component: ModificationLayerComponent}, */\n/*   {path: \"**\", component: BaseImageComponent} */\n/* ] */\n\n@NgModule({\n  declarations: [\n    AppComponent,\n    ControlBarComponent,\n    DrawableCanvasComponent,\n    ModificationLayerComponent,\n    BaseImageComponent,\n    VerificationLayerComponent,\n  ],\n  imports: [\n    BrowserModule,\n    FormsModule,\n    HttpModule,\n    MdlModule,\n    /* RouterModule.forRoot(appRoutes), */\n  ],\n  providers: [ConfigService],\n  bootstrap: [AppComponent]\n})\nexport class AppModule { }\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/app.module.ts","import { Component, Input, AfterViewInit, ViewChild, ElementRef } from '@angular/core'\nimport { Http, Response } from '@angular/http'\nimport { ConfigService } from '../config.service'\nimport * as _ from 'lodash'\nimport {Bound} from './bound'\n\n@Component({\n  selector: 'base-image',\n  templateUrl: './base-image.component.html',\n  /* viewProviders: [HTTP_PROVIDERS], */\n  styleUrls: ['./base-image.component.css'],\n})\nexport class BaseImageComponent implements AfterViewInit {\n\n  config: ConfigService;\n  http: Http;\n  ctx: CanvasRenderingContext2D;\n  @ViewChild(\"canvas\") canvasRef: ElementRef;\n  @Input() height: number;\n  @Input() width: number;\n\n  constructor(config: ConfigService, http: Http) {\n    this.config = config;\n    this.http = http;\n    this.config.size.subscribe((size) => {\n      const [width, height] = size;\n      this.load(width, height);\n    })\n  }\n\n  ngAfterViewInit() {\n    this.ctx = this.canvasRef.nativeElement.getContext('2d');\n    this.load(this.width, this.height);\n  }\n\n  load(width: number, height: number) {\n    const img = <HTMLImageElement>document.createElement('img');\n    img.src = this.config.getFrameSrc();\n    img.height = height;\n    img.width = width;\n    img.onload = () => {\n      this.ctx.drawImage(img, 0, 0, width, height);\n      this.http.get(this.config.getBoundingSrc())\n        .subscribe((res) => {\n          const objectId = this.config.objectId.replace('obj', '');\n          const bound = Bound.parseXML(res.text(), width, height, objectId);\n          bound.draw(this.ctx);\n        });\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/base-image/base-image.component.ts","import * as _ from 'lodash'\nexport class Bound {\n  x: number;\n  y: number;\n  width: number;\n  height: number;\n  name: string;\n  constructor(value: { x: number, y: number, width: number, height: number, name: string }) {\n    this.x = value.x;\n    this.y = value.y;\n    this.height = value.height;\n    this.width = value.width;\n    this.name = value.name;\n  }\n  scale(xscale: number, yscale: number) {\n    this.x = this.x * xscale;\n    this.y = this.y * yscale;\n    this.width = this.width * xscale;\n    this.height = this.height * yscale;\n  }\n  static getNameFromId(id: string) {\n    const id_map = {\n      'n02691156': \"airplane\",\n      'n02419796': \"antelope\",\n      'n02131653': \"bear\",\n      'n02834778': \"bicycle\",\n      'n01503061': \"bird\",\n      'n02924116': \"bus\",\n      'n02958343': \"car\",\n      'n02402425': \"cattle\",\n      'n02084071': \"dog\",\n      'n02121808': \"domestic_cat\",\n      'n02503517': \"elephant\",\n      'n02118333': \"fox\",\n      'n02510455': \"giant_panda\",\n      'n02342885': \"hamster\",\n      'n02374451': \"horse\",\n      'n02129165': \"lion\",\n      'n01674464': \"lizard\",\n      'n02484322': \"monkey\",\n      'n03790512': \"motorcycle\",\n      'n02324045': \"rabbit\",\n      'n02509815': \"red_panda\",\n      'n02411705': \"sheep\",\n      'n01726692': \"snake\",\n      'n02355227': \"squirrel\",\n      'n02129604': \"tiger\",\n      'n04468005': \"train\",\n      'n01662784': \"turtle\",\n      'n04530566': \"watercraft\",\n      'n02062744': \"whale\",\n      'n02391049': \"zebra\",\n    };\n    return id_map[id];\n  }\n  static parseXML(res: string, canvas_width: number, canvas_height: number, objectId: string): Bound {\n    const parser = new DOMParser();\n    const xml = parser.parseFromString(res, 'text/xml');\n    let node = xml.querySelector('annotation');\n    const queryint = (query) => parseInt(node.querySelector(query).textContent);\n    const height = queryint('size height');\n    const width = queryint('size width');\n    node = _.find(node.querySelectorAll('object'), obj => {\n      return obj.querySelector('trackid').textContent == objectId\n    });\n    const nameid = node.querySelector('name').textContent;\n    const name = this.getNameFromId(nameid);\n    const xmax = queryint('object xmax');\n    const xmin = queryint('object xmin');\n    const ymax = queryint('object ymax');\n    const ymin = queryint('object ymin');\n    const bound = new Bound({\n      x: xmin, y: ymin, height: (ymax - ymin), width: (xmax - xmin),\n      name: name\n    });\n    bound.scale(canvas_width / width, canvas_height / height);\n    return bound;\n  }\n  draw(ctx: CanvasRenderingContext2D) {\n    ctx.lineWidth = 4;\n    ctx.strokeStyle = 'rgba(0,0,0,0.5)';\n    ctx.strokeRect(this.x, this.y, this.width, this.height);\n    ctx.textAlign = 'center';\n    ctx.textBaseline = 'bottom';\n    ctx.font = '30px Arial';\n    ctx.fillText(this.name, this.x + this.width / 2, this.y);\n  }\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/base-image/bound.ts","import { Component, OnInit } from '@angular/core';\nimport {ControlService} from '../control.service'\n\n\n@Component({\n  selector: 'app-control-bar',\n  templateUrl: './control-bar.component.html',\n  styleUrls: ['./control-bar.component.css']\n})\nexport class ControlBarComponent implements OnInit {\n  brushSize: number = 5;\n  groundCheck: boolean = true;\n  control: ControlService;\n\n  constructor(control: ControlService) {\n    this.control = control;\n    this.control.controller = this;\n  }\n\n  reset(){\n    this.control.reciever.reset();\n  }\n  setSize(size: number){\n    this.control.reciever.brushSize = size;\n  }\n\n  setGround(check: boolean){\n    this.control.reciever.brushColor = this.groundColor(check);\n  }\n\n  ngOnInit() {\n  }\n\n  groundColor(check: boolean):string{\n    return check ? \"green\" : \"red\";\n  }\n  groundText(check: boolean):string {\n    return check ? \"foreground\" : \"backgroud\";\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/control-bar/control-bar.component.ts","import { Component, AfterViewInit, Input, ViewChild, ElementRef } from '@angular/core';\nimport { ControlService } from '../control.service'\n\n@Component({\n  selector: 'drawable-canvas',\n  templateUrl: './drawable-canvas.component.html',\n  styleUrls: ['./drawable-canvas.component.css']\n})\nexport class DrawableCanvasComponent implements AfterViewInit {\n  @Input() brushSize: number = 5;\n  @Input() height: number;\n  @Input() width: number;\n\n  ctx: CanvasRenderingContext2D;\n  canvas: HTMLCanvasElement;\n  dragging: boolean = false;\n  pts: Array<[number, number]> = [];\n  brushColor: string = \"red\";\n  control: ControlService;\n  @ViewChild(\"canvas\") canvasRef: ElementRef;\n\n\n  constructor(control: ControlService) {\n    this.control = control;\n    this.control.reciever = this;\n  }\n\n  reset() {\n    this.ctx.clearRect(0, 0, this.width, this.height);\n  }\n\n  ngAfterViewInit() {\n    this.canvas = this.canvasRef.nativeElement;\n    this.ctx = this.canvas.getContext('2d');\n  }\n\n  dragStart(e: MouseEvent): void {\n    console.log(\"this method called\");\n    console.log(this.ctx);\n    this.dragging = true;\n    this.ctx.lineWidth = this.brushSize;\n    const color = this.brushColor;\n    this.ctx.strokeStyle = color;\n    this.pts.length = 0;\n    this.ctx.globalCompositeOperation = 'source-over';\n    this.ctx.lineCap = this.ctx.lineJoin = 'round';\n    e.stopPropagation();\n  }\n\n  dragMove(e: MouseEvent): void {\n    if (this.dragging) {\n      const rect = this.canvas.getBoundingClientRect();\n      const x = e.clientX - rect.left;\n      const y = e.clientY - rect.top;\n      if (this.pts.length == 2) {\n        this.ctx.beginPath();\n        this.ctx.bezierCurveTo(this.pts[0][0], this.pts[0][1], this.pts[1][0], this.pts[1][1], x, y);\n        this.ctx.stroke();\n        this.ctx.moveTo(x, y);\n        this.pts.length = 0;\n      }\n      this.pts.push([x, y]);\n    }\n  }\n\n  dragEnd(e: MouseEvent): void {\n    this.dragging = false;\n    this.pts.length = 0;\n  }\n\n  get image() {\n    return this.ctx.getImageData(0, 0, this.width, this.height);\n  }\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/drawable-canvas/drawable-canvas.component.ts","import { Component, OnInit } from '@angular/core'\nimport { ControlService } from '../control.service'\nimport { ConfigService } from '../config.service'\n\n@Component({\n  selector: 'modification-layer',\n  templateUrl: './modification-layer.component.html',\n  styleUrls: ['./modification-layer.component.css'],\n  providers: [ControlService],\n})\nexport class ModificationLayerComponent implements OnInit {\n\n  height: number;\n  width: number;\n  control: ControlService;\n  config: ConfigService;\n\n  constructor(control: ControlService, config: ConfigService) {\n    this.config = config;\n    config.size.subscribe(size => {\n      [this.width, this.height] = size;\n    });\n    this.control = control;\n  }\n\n  ngOnInit() {\n  }\n\n  submit() {\n    const image = <ImageData>this.control.reciever.image;\n    this.config.submitModification(image);\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/modification-layer/modification-layer.component.ts","export function imgdata2mask(img: ImageData): [Uint8Array, Uint8Array] {\n  const rgba = img.data;\n  const size = img.height * img.width;\n  const red = new Uint8Array(size / 4);\n  const green = new Uint8Array(size / 4);\n  for (let i = 0; i < size; i++) {\n    let j = Math.floor(i / 8);\n    let k = 7 - (i % 8);\n    if (img.data[i * 4] > 0) {\n      red[j] += 1 << k;\n    }\n    if (img.data[i * 4 + 1] > 0) {\n      green[j] += 1 << k;\n    }\n  }\n  return [red, green];\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/utils/Utils.ts","import { Component } from '@angular/core';\nimport { ConfigService } from '../config.service'\n\n@Component({\n  selector: 'verification-layer',\n  templateUrl: './verification-layer.component.html',\n  styleUrls: ['./verification-layer.component.css'],\n})\nexport class VerificationLayerComponent {\n  height: number;\n  width: number;\n  config: ConfigService;\n\n  constructor(config: ConfigService) {\n    this.config = config;\n    config.size.subscribe(size=>{\n      [this.width, this.height] = size;\n    });\n  }\n  submit(value: boolean) {\n    this.config.submitVerification(value);\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/verification-layer/verification-layer.component.ts","// The file contents for the current environment will overwrite these during build.\n// The build system defaults to the dev environment which uses `environment.ts`, but if you do\n// `ng build --env=prod` then `environment.prod.ts` will be used instead.\n// The list of which env maps to which file can be found in `angular-cli.json`.\n\nexport const environment = {\n  production: false\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/environments/environment.ts","// This file includes polyfills needed by Angular 2 and is loaded before\n// the app. You can add your own extra polyfills to this file.\nimport 'core-js/es6/symbol';\nimport 'core-js/es6/object';\nimport 'core-js/es6/function';\nimport 'core-js/es6/parse-int';\nimport 'core-js/es6/parse-float';\nimport 'core-js/es6/number';\nimport 'core-js/es6/math';\nimport 'core-js/es6/string';\nimport 'core-js/es6/date';\nimport 'core-js/es6/array';\nimport 'core-js/es6/regexp';\nimport 'core-js/es6/map';\nimport 'core-js/es6/set';\nimport 'core-js/es6/reflect';\n\nimport 'core-js/es7/reflect';\nimport 'zone.js/dist/zone';\n\n\n\n// WEBPACK FOOTER //\n// ./src/polyfills.ts"],"sourceRoot":""}